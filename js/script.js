const $=a=>document.querySelector(a),$$=a=>document.querySelectorAll(a);function initTooltips(){$$("abbr[title]").forEach(a=>{const b=a.getAttribute("title");if(!b)return;let c=null;const d=()=>(c=document.createElement("div"),c.className="floating-tooltip",c.textContent=b,document.body.appendChild(c),c),e=()=>{if(!c)return;const b=a.getBoundingClientRect(),d=c.getBoundingClientRect(),e=window.scrollY+b.top-d.height-10,f=Math.max(10,Math.min(window.scrollX+b.left+(b.width-d.width)/2,window.innerWidth-d.width-10));c.style.top=`${e}px`,c.style.left=`${f}px`};a.addEventListener("mouseenter",()=>{a.setAttribute("title",""),c=d(),e()}),a.addEventListener("mousemove",e),a.addEventListener("mouseleave",()=>{a.setAttribute("title",b),c&&(c.remove(),c=null)})})}function initSidebar(){const a=$(".sidebar");if(!a)return;const b=a.querySelectorAll("li");b.forEach(a=>{a.addEventListener("mouseenter",()=>a.classList.add("open"))}),a.addEventListener("mouseleave",()=>{b.forEach(a=>a.classList.remove("open"))})}function initSmoothScroll(){$$("a[href^=\"#\"]").forEach(a=>{a.addEventListener("click",function(a){const b=this.getAttribute("href").slice(1);if(b){const c=document.getElementById(b);c&&(a.preventDefault(),c.scrollIntoView({behavior:"smooth",block:"start"}),history.pushState&&history.pushState(null,"",`#${b}`))}})})}const testimonials=[{text:"Nem\u016F\u017Eu si vynachv\xE1lit Pana Lauera z mnoha d\u016Fvod\u016F, jako je rychlost, p\u0159ipravenost a neskute\u010Dn\xE1 ochota.",source:"Andy V.",url:"https://www.doucuji.eu/381550-doucovani-srozumitelne-a-lidske-doucovani-statistiky-a-datove-analyzy"},{text:"Obrovsk\xE1 spokojenost s panem Lauerem. Je\u0161t\u011B jednou velk\xE9 D\xCDKY za pomoc se statistikou a v\u0161em moc doporu\u010Duji.",source:"Vendula K.",url:"https://www.doucuji.eu/381550-doucovani-srozumitelne-a-lidske-doucovani-statistiky-a-datove-analyzy"},{text:"Pokud pot\u0159ebujete poradit se statistikou v r\xE1mci sv\xE9 vysoko\u0161kolsk\xE9 pr\xE1ce ur\u010Dit\u011B se nev\xE1hejte obr\xE1tit na pana Michala.",source:"Petra M.",url:"https://www.doucuji.eu/381550-doucovani-srozumitelne-a-lidske-doucovani-statistiky-a-datove-analyzy"},{text:"D\xEDky panu Lauerovi se mi poda\u0159ilo \xFAsp\u011B\u0161n\u011B spo\u010D\xEDtat \u0159adu p\u0159\xEDklad\u016F a usp\u011Bt u zkou\u0161ky na prvn\xED pokus, co\u017E pova\u017Euji za z\xE1zrak:)",source:"Andrea D.",url:"https://www.doucuji.eu/381550-doucovani-srozumitelne-a-lidske-doucovani-statistiky-a-datove-analyzy"},{text:"Pana Michala na 100 % doporu\u010Duji. Velk\xE1 pomoc p\u0159i DP. Je vid\u011Bt, \u017Ee statistice opravdu rozum\xED a hlavn\u011B ji dok\xE1\u017Ee vysv\u011Btlit.",source:"Mgr. I.",url:"https://www.doucuji.eu/381550-doucovani-srozumitelne-a-lidske-doucovani-statistiky-a-datove-analyzy"}];function initTestimonialCarousel(){const a=$(".testimonial-carousel");if(!a)return;const b=a.querySelector(".testimonial-cards"),c=a.querySelector(".testimonial-arrow-left"),d=a.querySelector(".testimonial-arrow-right");if(!b||!c||!d)return;let e=0;const f=testimonials.length,g=768>=window.innerWidth?1:3,h=()=>{b.innerHTML="";for(let a=0;a<g;a++){const c=(e+a)%f,d=testimonials[c],g=document.createElement("div");g.className="testimonial-card",g.innerHTML=`
        <div class="testimonial-text">${d.text}</div>
        <div class="testimonial-bottom-row">
          <div class="testimonial-number">${c+1}</div>
          <div class="testimonial-source"> 
            <a href="${d.url}" target="_blank" rel="noopener" 
               title="Source" aria-label="Source">
               ${d.source}
            </a> ðŸ”—
          </div>
        </div>
      `,b.appendChild(g)}};c.addEventListener("click",()=>{e=(e-1+f)%f,h()}),d.addEventListener("click",()=>{e=(e+1)%f,h()});let i;window.addEventListener("resize",()=>{clearTimeout(i),i=setTimeout(()=>{const a=768>=window.innerWidth?1:3;a!==g&&location.reload()},250)}),h()}function initLightbox(){const a=$$(".gallery-link"),b=$("#lightbox");if(!a.length||!b)return;const c=b.querySelector(".lightbox-img"),d=b.querySelector(".lightbox-thumbnails"),e=b.querySelector(".lightbox-caption a"),f=b.querySelector(".lightbox-close"),g=b.querySelector(".lightbox-prev"),h=b.querySelector(".lightbox-next");let i=0;const j=()=>{const b=a[i],f=b.querySelector("img");c.src=f.src,c.alt=f.alt,e.href=f.dataset.source||f.src,d.querySelectorAll("img").forEach((a,b)=>{a.classList.toggle("active",b===i)})};a.forEach((a,c)=>{const e=a.querySelector("img"),f=document.createElement("img");f.src=e.src,f.alt=e.alt,f.dataset.index=c,f.addEventListener("click",()=>{i=c,j()}),d.appendChild(f),a.addEventListener("click",a=>{a.preventDefault(),i=c,j(),b.classList.add("show"),document.body.style.overflow="hidden"})}),g?.addEventListener("click",()=>{i=(i-1+a.length)%a.length,j()}),h?.addEventListener("click",()=>{i=(i+1)%a.length,j()});const k=()=>{b.classList.remove("show"),document.body.style.overflow=""};f?.addEventListener("click",k),b.addEventListener("click",a=>{a.target===b&&k()}),document.addEventListener("keydown",a=>{if(b.classList.contains("show"))switch(a.key){case"Escape":k();break;case"ArrowLeft":g?.click();break;case"ArrowRight":h?.click()}})}function initLazyLoading(){if("IntersectionObserver"in window){const a=new IntersectionObserver((a,b)=>{a.forEach(a=>{if(a.isIntersecting){const c=a.target;c.src=c.dataset.src||c.src,c.classList.remove("lazy"),b.unobserve(c)}})});$$("img[loading=\"lazy\"]").forEach(b=>{a.observe(b)})}}document.addEventListener("DOMContentLoaded",()=>{initTooltips(),initSidebar(),initSmoothScroll(),initTestimonialCarousel(),initLightbox(),initLazyLoading()}),document.addEventListener("visibilitychange",()=>{document.hidden?$$(".testimonial-arrow").forEach(a=>{a.style.pointerEvents="none"}):$$(".testimonial-arrow").forEach(a=>{a.style.pointerEvents="auto"})});